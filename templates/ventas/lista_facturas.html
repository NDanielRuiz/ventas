{% extends 'base.html' %}
{% load humanize %}

{% block title %}Mis Facturas{% endblock %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">Mis Facturas</h1>
    <a href="{% url 'crear_factura' %}" class="btn btn-primary">Crear Nueva Factura</a>
  </div>

  <div class="card">
    <div class="card-body">
      <div class="table-responsive"> 
        <table class="table table-hover">
          <thead>
            <tr>
              <th># Factura</th>
              <th>Cliente</th>
              <th>Fecha</th>
              <th class="text-end">Total</th>
              <th class="text-end">Saldo Pendiente</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody>
            {% for factura in facturas %}
            <tr>
              <td><a href="{% url 'detalle_factura' factura.id %}">Factura #{{ factura.id }}</a></td>
              <td>{{ factura.cliente }}</td>
              <td>{{ factura.fecha_emision|date:"d M Y" }}</td>
              
              <td class="text-end">${{ factura.total|floatformat:0|intcomma }}</td>
              <td class="text-end">${{ factura.saldo_pendiente|floatformat:0|intcomma }}</td>
              
              <td>
                <span class="badge 
                  {% if factura.estado == 'PAGADA' %}bg-success{% elif factura.estado == 'PENDIENTE' %}bg-warning text-dark{% else %}bg-danger{% endif %}">
                  {{ factura.get_estado_display }}
                </span>
              </td>
            </tr>
            
            {% empty %}
            <tr>
              <td colspan="6" class="text-center">No has creado ninguna factura todav√≠a.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}